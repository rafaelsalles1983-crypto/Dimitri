<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üéÆ Jogo Interativo de Idiomas</title>
<link rel="stylesheet" href="style.css">
<style>
#gameArea { 
  display: grid; 
  grid-template-columns: repeat(4, 80px); 
  grid-template-rows: repeat(4, 80px); 
  gap: 10px; 
  justify-content: center; 
  margin: 20px auto; 
}
.square { 
  width: 100%; 
  height: 100%; 
  border-radius: 8px; 
  cursor: pointer; 
  border: 2px solid #333; 
  transition: all 0.3s; 
  display: flex;
  flex-direction: column;
  align-items: center; 
  justify-content: center;
  overflow: hidden;
  background: #222;
}
.square img { max-width: 70%; max-height: 70%; }
.square span { display: none; color: #fff; font-size: 0.8em; text-align: center; margin-top: 2px; }
#gameInfo { text-align: center; font-size: 1.1em; margin-top: 15px; font-weight: bold; }
#score { text-align: center; margin-top: 10px; }
.neon { box-shadow: 0 0 8px #fff,0 0 12px #0ff,0 0 20px #0ff,0 0 30px #0ff; transform: scale(1.1); transition: all 0.3s; }
#timerBarContainer { width: 80%; height: 12px; background: #ccc; margin: 10px auto; border-radius: 8px; overflow: hidden; }
#timerBar { height: 100%; width: 100%; background: #0ff; transition: width 0.1s linear; }
#controls { text-align: center; margin-top: 15px; }
#controls button { padding: 5px 12px; margin: 0 5px; font-size: 0.95em; cursor: pointer; }
/* Pr√©-visualiza√ß√£o 2x2 */
#gameArea.preview { display: grid; grid-template-columns: repeat(2, 140px); grid-template-rows: repeat(2, 140px); gap: 15px; justify-content: center; margin: 20px auto; }
#gameArea.preview .square img { max-width: 100px; max-height: 100px; }
#gameArea.preview .square span { display: block; font-size: 1.1em; font-weight: bold; margin-top: 8px; }
</style>
</head>
<body>
<header>
  <span id="siteTitle">–°–ª–∞–≤—è–Ω—Å–∫–∏–π –∫–ª—É–±</span>
  <button id="languageToggle" style="margin-left:20px;">PT</button>
</header>
<nav>
<ul>
<li><a href="index.html">–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ</a></li>
<li><a href="crossword.html">–ø—Ä–æ–≥—Ä–µ—Å—Å</a></li>
<li><a href="exercises.html">—É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è</a></li>
<li><a href="jogoCores.html">–ò–≥—Ä–∞ –¶–≤–µ—Ç–∞</a></li>
<li><a href="#">–ö—Ç–æ –º—ã</a></li>
<li><a href="contact.html">–ö–æ–Ω—Ç–∞–∫—Ç</a></li>
<li><a href="#">—Å–ª–æ–≤√°—Ä—å</a></li>
</ul>
</nav>
<div class="content">
<h2>üéÆ <span id="gameTitle">Jogo Interativo</span></h2>
<div id="gameInfo"></div>
<div id="timerBarContainer"><div id="timerBar"></div></div>
<div id="gameArea"></div>
<div id="score">‚ù§Ô∏è 5 | ‚úÖ 0 | ‚ùå 0 | N√≠vel 1 | Rodada 1/10 | Acertos: 0%</div>
<div id="controls">
<button id="playBtn">‚ñ∂ Play</button>
<button id="restartBtn">Recome√ßar</button>
<button id="stopBtn">Parar</button>
</div>
</div>

<script>
// --- Dados ---
const colors=["red","blue","green","yellow"];
const translations = {
  ru: { title:"–ò–≥—Ä–∞ –¶–≤–µ—Ç–∞", colors:{ red:"–ö—Ä–∞—Å–Ω—ã–π", blue:"–°–∏–Ω–∏–π", green:"–ó–µ–ª—ë–Ω—ã–π", yellow:"–ñ—ë–ª—Ç—ã–π" }, gameOver:"–ö–æ–Ω–µ—Ü –∏–≥—Ä—ã!", correct:"–ü—Ä–∞–≤–∏–ª—å–Ω–æ!", wrong:"–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ!" },
  pt: { title:"Jogo das Cores", colors:{ red:"Vermelho", blue:"Azul", green:"Verde", yellow:"Amarelo" }, gameOver:"Fim de jogo!", correct:"Correto!", wrong:"Errado!" }
};
const objects=["bola","carro","casa","aviao"];
const translationsObjects={ ru:{ bola:"–ú—è—á", carro:"–ú–∞—à–∏–Ω–∞", casa:"–î–æ–º", aviao:"–°–∞–º–æ–ª–µ—Ç" }, pt:{ bola:"Bola", carro:"Carro", casa:"Casa", aviao:"Avi√£o" } };
const objectImages={ bola:"imagens/bola.png", carro:"imagens/carro.png", casa:"imagens/casa.png", aviao:"imagens/aviao.png" };
const animals=["cachorro","gato","passaro","peixe"];
const translationsAnimals={ pt:{ cachorro:"Cachorro", gato:"Gato", passaro:"P√°ssaro", peixe:"Peixe" }, ru:{ cachorro:"–°–æ–±–∞–∫–∞", gato:"–ö–æ—à–∫–∞", passaro:"–ü—Ç–∏—Ü–∞", peixe:"–†—ã–±–∞" } };
const animalImages={ cachorro:"imagens/cachorro.png", gato:"imagens/gato.png", passaro:"imagens/passaro.png", peixe:"imagens/peixe.png" };
const fruits=["maca","banana","laranja","uva"];
const translationsFruits={ pt:{ maca:"Ma√ß√£", banana:"Banana", laranja:"Laranja", uva:"Uva" }, ru:{ maca:"–Ø–±–ª–æ–∫–æ", banana:"–ë–∞–Ω–∞–Ω", laranja:"–ê–ø–µ–ª—å—Å–∏–Ω", uva:"–í–∏–Ω–æ–≥—Ä–∞–¥" } };
const fruitImages={ maca:"imagens/maca.png", banana:"imagens/banana.png", laranja:"imagens/laranja.png", uva:"imagens/uva.png" };
const shapes=["quadrado","circulo","triangulo","estrela"];
const translationsShapes={ pt:{ quadrado:"Quadrado", circulo:"C√≠rculo", triangulo:"Tri√¢ngulo", estrela:"Estrela" }, ru:{ quadrado:"–ö–≤–∞–¥—Ä–∞—Ç", circulo:"–ö—Ä—É–≥", triangulo:"–¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫", estrela:"–ó–≤–µ–∑–¥–∞" } };
const shapeImages={ quadrado:"imagens/quadrado.png", circulo:"imagens/circulo.png", triangulo:"imagens/triangulo.png", estrela:"imagens/estrela.png" };

// Interface
const uiTexts = {
  ru: {
    siteTitle:"–°–ª–∞–≤—è–Ω—Å–∫–∏–π –∫–ª—É–±",
    gameTitleColors:"–ò–≥—Ä–∞ –¶–≤–µ—Ç–∞",
    gameTitleObjects:"–ò–≥—Ä–∞ –û–±—ä–µ–∫—Ç–æ–≤",
    gameTitleAnimals:"–ò–≥—Ä–∞ –ñ–∏–≤–æ—Ç–Ω—ã—Ö",
    gameTitleFruits:"–ò–≥—Ä–∞ –§—Ä—É–∫—Ç–æ–≤",
    gameTitleShapes:"–ò–≥—Ä–∞ –§–∏–≥—É—Ä",
    gameTitleAnimalsColors:"–ò–≥—Ä–∞ –ñ–∏–≤–æ—Ç–Ω—ã—Ö + –¶–≤–µ—Ç–∞",
    gameTitleObjectsTranslate:"–ò–≥—Ä–∞ –û–±—ä–µ–∫—Ç–æ–≤ + –ü–µ—Ä–µ–≤–æ–¥",
    gameTitleAudioTranslate:"–ê—É–¥–∏–æ + –ü–µ—Ä–µ–≤–æ–¥",
    controls:{ play:"‚ñ∂ –ò–≥—Ä–∞—Ç—å", restart:"–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å", stop:"–°—Ç–æ–ø" },
    preview:"üîé –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏...",
    paused:"‚è∏ –ò–≥—Ä–∞ –Ω–∞ –ø–∞—É–∑–µ",
    endColors:"‚úÖ –ö–æ–Ω–µ—Ü –∏–≥—Ä—ã —Å —Ü–≤–µ—Ç–∞–º–∏!",
    levelComplete: level=>`‚úÖ –£—Ä–æ–≤–µ–Ω—å ${level-1} –ø—Ä–æ–π–¥–µ–Ω!`
  },
  pt: {
    siteTitle:"Clube Eslavo",
    gameTitleColors:"Jogo das Cores",
    gameTitleObjects:"Jogo de Objetos",
    gameTitleAnimals:"Jogo dos Animais",
    gameTitleFruits:"Jogo das Frutas",
    gameTitleShapes:"Jogo das Formas",
    gameTitleAnimalsColors:"Jogo Animais + Cores",
    gameTitleObjectsTranslate:"Jogo Objetos + Tradu√ß√£o",
    gameTitleAudioTranslate:"√Åudio + Tradu√ß√£o",
    controls:{ play:"‚ñ∂ Play", restart:"Recome√ßar", stop:"Parar" },
    preview:"üîé Observando os itens...",
    paused:"‚è∏ Jogo pausado",
    endColors:"‚úÖ Fim do jogo de cores!",
    levelComplete: level=>`‚úÖ N√≠vel ${level-1} conclu√≠do!`
  }
};

let currentLang="pt", currentMode="colors", correctItem="", targetCount=0, selectedCorrect=0;
let score={correct:0,wrong:0}, level=1, round=1, maxRounds=10, maxLevel=3;
let gameActive=false, waitingNextLevel=false, timerInterval;
let lives = 5, streak = 0; // Vidas e acertos consecutivos

const gameArea=document.getElementById("gameArea");
const gameInfo=document.getElementById("gameInfo");
const scoreDiv=document.getElementById("score");
const timerBar=document.getElementById("timerBar");

// --- Bot√µes ---
document.getElementById("languageToggle").addEventListener("click", ()=>{ 
  currentLang=currentLang==="ru"?"pt":"ru"; 
  updateLang(); 
});
document.getElementById("restartBtn").addEventListener("click", restartGame);
document.getElementById("stopBtn").addEventListener("click", stopGame);
document.getElementById("playBtn").addEventListener("click", ()=> { 
  if(waitingNextLevel){ waitingNextLevel=false; showPreview(); } 
  else { gameActive=true; showPreview(); } 
});

// --- Atualiza idioma ---
function updateLang(){
  const texts = uiTexts[currentLang];
  document.getElementById("siteTitle").textContent = texts.siteTitle;
  document.getElementById("gameTitle").textContent =
    currentMode==="colors"? texts.gameTitleColors :
    currentMode==="objects"? texts.gameTitleObjects :
    currentMode==="animals"? texts.gameTitleAnimals :
    currentMode==="fruits"? texts.gameTitleFruits :
    currentMode==="animalsColors"? texts.gameTitleAnimalsColors :
    currentMode==="objectsTranslate"? texts.gameTitleObjectsTranslate :
    currentMode==="audioTranslate"? texts.gameTitleAudioTranslate :
    texts.gameTitleShapes;
  document.getElementById("languageToggle").textContent=currentLang==="ru"?"PT":"RU";
  document.getElementById("playBtn").textContent = texts.controls.play;
  document.getElementById("restartBtn").textContent = texts.controls.restart;
  document.getElementById("stopBtn").textContent = texts.controls.stop;
}

// --- Shuffle ---
function shuffleArray(array){ for(let i=array.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [array[i],array[j]]=[array[j],array[i]]; } }

// --- Fala ---
function speak(text){ 
  if('speechSynthesis' in window){ 
    window.speechSynthesis.cancel(); 
    const utter=new SpeechSynthesisUtterance(text);
    utter.lang=currentLang==='ru'?'ru-RU':'pt-BR'; 
    utter.rate=1; utter.pitch=1; utter.volume=1;
    speechSynthesis.speak(utter); 
  }
}

// --- Pr√©-visualiza√ß√£o ---
function showPreview(){
  if(!gameActive) return;
  gameInfo.textContent = uiTexts[currentLang].preview;
  gameArea.innerHTML = "";
  gameArea.classList.add("preview");
  let items, images, labels;
  if(currentMode==="colors"){ items=colors; labels=translations[currentLang].colors; }
  else if(currentMode==="objects"){ items=objects; images=objectImages; labels=translationsObjects[currentLang]; }
  else if(currentMode==="animals"){ items=animals; images=animalImages; labels=translationsAnimals[currentLang]; }
  else if(currentMode==="fruits"){ items=fruits; images=fruitImages; labels=translationsFruits[currentLang]; }
  else if(currentMode==="shapes"){ items=shapes; images=shapeImages; labels=translationsShapes[currentLang]; }
  else if(currentMode==="animalsColors"){ items=colors; labels=translations[currentLang].colors; }
  else if(currentMode==="objectsTranslate"){ items=objects; labels=translationsObjects[currentLang]; images=objectImages; }
  else if(currentMode==="audioTranslate"){ items=objects; labels=translationsObjects[currentLang]; images=objectImages; }

  items.forEach(item=>{
    const sq=document.createElement("div"); sq.classList.add("square");
    if(currentMode==="colors" || currentMode==="animalsColors"){ sq.style.background=item; }
    else { const img=document.createElement("img"); img.src=images[item]; sq.appendChild(img); }
    const label=document.createElement("span"); label.textContent=labels[item];
    sq.appendChild(label); gameArea.appendChild(sq);
  });
  setTimeout(()=>{ gameArea.classList.remove("preview"); startRound(); },2000);
}

// --- Criar quadrados ---
function createSquares(){
  gameArea.innerHTML=""; 
  const totalSquares=16;
  const positions=Array.from({length:totalSquares},(_,i)=>i); 
  shuffleArray(positions);
  const targetPositions=positions.slice(0,targetCount);
  for(let i=0;i<totalSquares;i++){
    const sq=document.createElement("div"); sq.classList.add("square");
    let pool, images;
    if(currentMode==="colors" || currentMode==="animalsColors"){ pool=colors; }
    else if(currentMode==="objects"){ pool=objects; images=objectImages; }
    else if(currentMode==="animals"){ pool=animals; images=animalImages; }
    else if(currentMode==="fruits"){ pool=fruits; images=fruitImages; }
    else if(currentMode==="shapes"){ pool=shapes; images=shapeImages; }
    else if(currentMode==="objectsTranslate" || currentMode==="audioTranslate"){ pool=objects; images=objectImages; }

    let item=targetPositions.includes(i)? correctItem : pool[Math.floor(Math.random()*pool.length)];
    while(item===correctItem && !targetPositions.includes(i)) item=pool[Math.floor(Math.random()*pool.length)];
    sq.dataset.item=item;
    if(currentMode==="colors" || currentMode==="animalsColors"){ sq.style.background=item; }
    else { const img=document.createElement("img"); img.src=images[item]; sq.appendChild(img); }
    sq.addEventListener("click", checkSquare); 
    gameArea.appendChild(sq);
  }
}

// --- Round ---
function startRound(){
  if(!gameActive || waitingNextLevel) return; 
  clearInterval(timerInterval);
  if(lives<=0){ gameOver(); return; }
  if(round>maxRounds){ 
    if(currentMode==="colors") currentMode="objects";
    else if(currentMode==="objects") currentMode="animals";
    else if(currentMode==="animals") currentMode="fruits";
    else if(currentMode==="fruits") currentMode="shapes";
    else if(currentMode==="shapes") currentMode="animalsColors";
    else if(currentMode==="animalsColors") currentMode="objectsTranslate";
    else if(currentMode==="objectsTranslate") currentMode="audioTranslate";
    else { level++; currentMode="colors"; }
    round=1; score.correct=0; score.wrong=0; updateScore(); waitingNextLevel=true;
    gameInfo.textContent=uiTexts[currentLang].levelComplete(level); 
    return;
  }

  let pool, labels;
  if(currentMode==="colors"){ pool=colors; labels=translations[currentLang].colors; }
  else if(currentMode==="objects"){ pool=objects; labels=translationsObjects[currentLang]; }
  else if(currentMode==="animals"){ pool=animals; labels=translationsAnimals[currentLang]; }
  else if(currentMode==="fruits"){ pool=fruits; labels=translationsFruits[currentLang]; }
  else if(currentMode==="shapes"){ pool=shapes; labels=translationsShapes[currentLang]; }
  else if(currentMode==="animalsColors"){ pool=colors; labels=translations[currentLang].colors; }
  else if(currentMode==="objectsTranslate" || currentMode==="audioTranslate"){ pool=objects; labels=translationsObjects[currentLang]; }

  correctItem=pool[Math.floor(Math.random()*pool.length)];
  targetCount = Math.floor(Math.random()*3) + 1;
  selectedCorrect=0; 
  createSquares();

  // Frase especial para modos extras
  if(currentMode==="animalsColors"){
    const animal=animals[Math.floor(Math.random()*animals.length)];
    const animalEmoji = animal==="cachorro"?"üê∂":animal==="gato"?"üê±":animal==="passaro"?"üê¶":"üêü";
    gameInfo.textContent = targetCount>1 ? `üëâ O ${animalEmoji} √© ${targetCount} cores` : `üëâ O ${animalEmoji} √© ___`;
    speak(labels[correctItem]);
  } else if(currentMode==="objectsTranslate" || currentMode==="audioTranslate"){
    gameInfo.textContent = targetCount>1 ? `üëâ Clique em ${targetCount} "${labels[correctItem]}"` : `üëâ Clique em "${labels[correctItem]}"`;
    if(currentMode==="audioTranslate") speak(labels[correctItem]);
  } else {
    const label=labels[correctItem];
    gameInfo.textContent = targetCount>1 ? `üëâ Clique em ${targetCount} "${label}"` : `üëâ Clique em "${label}"`;
    speak(label);
  }
  startTimer();
}

// --- Timer ---
function startTimer(){
  let maxTime=Math.max(7000-(level-1)*500,2000); 
  const interval=50; 
  timerBar.style.width='100%';
  timerInterval=setInterval(()=>{
    maxTime-=interval; 
    timerBar.style.width=(maxTime/7000*100)+'%';
    if(maxTime<=0){ 
      clearInterval(timerInterval); 
      lives--; streak=0;
      updateScore(); 
      speak(uiTexts[currentLang].wrong); 
      round++; 
      setTimeout(startRound,500); 
    }
  },interval);
}

// --- Click ---
function checkSquare(e){
  if(!gameActive || waitingNextLevel) return;
  const item=e.currentTarget.dataset.item;
  if(item===correctItem){ 
    e.currentTarget.classList.add("neon"); 
    selectedCorrect++; 
    if(selectedCorrect===targetCount){ 
      score.correct++; 
      streak++;
      if(streak>=5 && lives<5){ lives++; streak=0; gameInfo.textContent += " üíñ Vida recuperada!"; speak("Voc√™ recuperou uma vida!"); }
      updateScore(); 
      clearInterval(timerInterval); 
      speak(uiTexts[currentLang].correct); 
      round++; 
      startRound(); 
    }
  } else { 
    score.wrong++; 
    lives--; streak=0;
    updateScore(); 
    speak(uiTexts[currentLang].wrong); 
    if(lives<=0) gameOver(); 
  }
}

// --- Pontua√ß√£o ---
function updateScore(){ 
  const total=score.correct+score.wrong; 
  const percent=total?Math.round((score.correct/total)*100):0; 
  scoreDiv.textContent=`‚ù§Ô∏è ${lives} | ‚úÖ ${score.correct} | ‚ùå ${score.wrong} | N√≠vel ${level} | Rodada ${round}/${maxRounds} | Acertos: ${percent}%`; 
}

function gameOver(){ 
  gameActive=false; 
  clearInterval(timerInterval); 
  gameInfo.textContent=uiTexts[currentLang].gameOver; 
  speak(gameInfo.textContent); 
  timerBar.style.width='0%'; 
}

function restartGame(){ 
  score={correct:0,wrong:0}; 
  lives=5; streak=0;
  level=1; round=1; 
  gameActive=false; waitingNextLevel=false; 
  currentMode="colors"; 
  updateScore(); 
  updateLang();
}

function stopGame(){ 
  gameActive=false; 
  clearInterval(timerInterval); 
  gameInfo.textContent=uiTexts[currentLang].paused; 
  timerBar.style.width='0%'; 
}

// Inicializa
updateLang();
</script>
</body>
</html>
