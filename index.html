<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Славянский клуб</title>
<link rel="stylesheet" href="style.css">

<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
/* ====== Navegação ====== */
nav { background-color: #eee; padding: 10px; }
nav ul { list-style: none; display: flex; gap: 15px; padding: 0; margin:0;}
nav ul li a { text-decoration: none; color: #333; cursor:pointer; }

/* Menu oculto mobile */
@media screen and (max-width: 768px) {
  nav { display: none; position: absolute; top: 60px; left: 0; width: 100%; background-color: #eee; padding: 10px 0; z-index: 1000;}
  nav ul { flex-direction: column; align-items: center; }
  nav.show { display: block; }
}

/* Overlay */
.overlay { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.7); z-index:5000; justify-content:center; align-items:center; overflow-y:auto; }
.overlay-content { background:#fff; margin:50px auto; padding:20px; border-radius:10px; width:90%; max-width:900px; position:relative; }

/* Botão fechar overlay */
.overlay .close-btn { position:absolute; top:10px; right:15px; font-size:28px; font-weight:bold; color:#333; cursor:pointer; }
.overlay .close-btn:hover { color:#000; }

/* Mascote Dimitri */
#dimitri { position: fixed; bottom: 20px; right: 20px; width: 120px; height: 180px; z-index: 1000; }
#dimitri .head { width: 80px; height: 80px; background: #ffcc99; border-radius: 50%; position: relative; margin:0 auto; border:2px solid #333; }
.ushanka { width:100%; height:30px; background:#800000; position:absolute; top:-10px; border-radius:50% 50% 0 0; }
.ushanka .ear { width:20px; height:20px; background:#800000; position:absolute; top:10px; border-radius:50%; }
.ushanka .ear.left { left:-10px; } .ushanka .ear.right { right:-10px; }
#dimitri .eye { width:15px; height:15px; background:#000; border-radius:50%; position:absolute; top:25px; animation: blink 4s infinite; }
#dimitri .eye.left { left:18px; } #dimitri .eye.right { right:18px; }
#dimitri .eyebrow { width:18px; height:3px; background:#333; position:absolute; top:18px; }
#dimitri .eyebrow.left { left:15px; transform:rotate(-10deg); }
#dimitri .eyebrow.right { right:15px; transform:rotate(10deg); }
#dimitri .mouth { width:40px; height:10px; border-bottom:3px solid #000; border-radius:0 0 20px 20px; position:absolute; bottom:15px; left:50%; transform:translateX(-50%); transition: all 0.3s; }
#dimitri .body { width:70px; height:80px; background:#0055aa; position:relative; margin:0 auto; top:10px; border-radius:10px; }
#dimitri .arm { width:15px; height:50px; background:#0055aa; position:absolute; top:10px; border-radius:10px; transform-origin:top center; transition: transform 0.3s; }
#dimitri .arm.left { left:-15px; } #dimitri .arm.right { right:-15px; }
@keyframes blink { 0%,90%,100% {height:15px;} 95%{height:2px;} }
.acenando .arm.left { transform: rotate(-30deg); } .acenando .arm.right { transform: rotate(30deg); }
.acenando .body { animation:pulse 0.3s infinite alternate; } 
@keyframes pulse { 0% { transform: scale(1); } 100% { transform: scale(1.05); } }
.neon .body { animation: neonPulse 0.5s infinite alternate; } .neon .ushanka { animation: neonPulse 0.5s infinite alternate; }
@keyframes neonPulse { 0% { background-color:#0055aa; box-shadow:none;} 50%{ background-color:#0f0; box-shadow:0 0 10px #0f0,0 0 20px #0f0;} 100%{background-color:#0055aa;box-shadow:none;} }

/* Progresso e lições */
.lesson-card.locked { pointer-events:none; opacity:0.5; cursor:not-allowed; }
#congratsMessage { display:none; font-size:3em; font-weight:bold; color:#0f0; text-align:center; margin-top:20px; animation: neonBlink 1s infinite; position: fixed; top:40%; left:50%; transform:translate(-50%,-50%); z-index:2000; pointer-events:none; }
@keyframes neonBlink { 0%,50%,100% { text-shadow:0 0 5px #0f0,0 0 10px #0f0,0 0 20px #0f0,0 0 40px #0f0; opacity:1;} 25%,75% { text-shadow:none; opacity:0.6; } }

/* Chat */
.chat-container { position:fixed; bottom:10px; left:10px; width:300px; max-width:90%; background:#fff; border:1px solid #ccc; border-radius:10px; z-index:1000; }
.chat-messages { height:200px; overflow-y:auto; padding:5px; }
.chat-input-container { display:flex; gap:5px; margin-top:5px; }
.chat-input-container input { flex:1; padding:5px; }
.chat-message.user { text-align:right; }
.chat-message.bot { text-align:left; display:flex; gap:5px; }
.avatar { width:20px; height:20px; background:#0f0; border-radius:50%; display:flex; align-items:center; justify-content:center; font-size:12px; font-weight:bold; }
</style>
</head>
<body>

<header>
  <span id="siteTitle">Славянский клуб</span>
  <a href="#" id="logoutBtn" class="btn" style="opacity:0; transition:opacity 0.5s;">Sair</a>
  <button id="languageToggle" style="margin-left:20px;">PT</button>
</header>

<nav id="sidebar">
  <ul>
    <li><a onclick="saveChatState(); openOverlay('drag.html')">Перетаскивание</a></li>
    <li><a onclick="saveChatState(); openOverlay('crossword.html')">Прогресс</a></li>
    <li><a onclick="saveChatState(); openOverlay('exercises.html')">Упражнения</a></li>
    <li><a onclick="saveChatState(); openOverlay('jogoCores.html')">Игра Цвета</a></li>
    <li><a onclick="saveChatState(); return false;">Кто мы</a></li>
    <li><a onclick="saveChatState(); openOverlay('contact.html')">Контакт</a></li>
    <li><a onclick="abrirDicionario()">словáрь</a></li>
  </ul>
</nav>

<div id="progress-container">
  <div id="progress-bar"></div>
</div>
<div id="overallProgress" class="progress-text">Progresso: 0 de 18 módulos concluídos</div>

<div class="lesson-container">
  <div class="lesson-card" data-key="possessivos">Притяжательные прилагательные</div>
  <div class="lesson-card locked" data-key="numerais">Числительные</div>
  <div class="lesson-card locked" data-key="verboSer">Глагол "ser" (настоящее время)</div>
  <!-- Continue todas as lições como antes -->
</div>

<!-- Overlay modal -->
<div id="overlayModal" class="overlay">
  <div class="overlay-content">
    <span class="close-btn" onclick="closeOverlay()">&times;</span>
    <div id="overlayBody"></div>
  </div>
</div>

<!-- Mascote e mensagem -->
<div id="dimitri">
  <div class="head">
    <div class="ushanka">
      <div class="ear left"></div>
      <div class="ear right"></div>
    </div>
    <div class="eye left"></div>
    <div class="eye right"></div>
    <div class="eyebrow left"></div>
    <div class="eyebrow right"></div>
    <div class="mouth"></div>
  </div>
  <div class="body">
    <div class="arm left"></div>
    <div class="arm right"></div>
  </div>
</div>
<div id="congratsMessage">Поздравления!</div>

<!-- Chat -->
<div id="chat-container" class="chat-container">
  <div id="chat-messages" class="chat-messages"></div>
  <div class="chat-input-container">
    <input type="text" id="chat-input" placeholder="Digite sua mensagem..." />
    <button id="chat-send">Enviar</button>
  </div>
</div>

<script>
/* ====== Firebase ====== */
const firebaseConfig = {
  apiKey: "AIzaSyCVt4eQOSUMhtKTUc89lAIM-AwrPakEOOI",
  authDomain: "clube-eslavo-dimitri.firebaseapp.com",
  projectId: "clube-eslavo-dimitri",
  storageBucket: "clube-eslavo-dimitri.firebasestorage.app",
  messagingSenderId: "696802076277",
  appId: "1:696802076277:web:3be4a9fb64001e25cefa3c",
  measurementId: "G-1H63WPQT0V"
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();

/* ====== Overlay ====== */
function openOverlay(url){
    const overlay = document.getElementById('overlayModal');
    const content = document.getElementById('overlayBody');
    fetch(url).then(r=>r.text()).then(html=>{
        content.innerHTML = html;
        overlay.style.display='flex';
    }).catch(err=>console.error(err));
}
function closeOverlay(){
    document.getElementById('overlayModal').style.display='none';
    document.getElementById('overlayBody').innerHTML='';
}

/* ====== Dicionário ====== */
function abrirDicionario(){
    openOverlay('dicionario.html'); // Pode criar um arquivo dicionario.html separado
}

/* ====== Language toggle ====== */
let currentLang='ru';
document.getElementById('languageToggle').addEventListener('click',()=>{
    currentLang = currentLang==='ru'?'pt':'ru';
    updateLanguage();
});
function updateLanguage(){
    const translations = {
      ru: { title:"Славянский клуб" },
      pt: { title:"Clube Eslavo" }
    };
    document.getElementById('siteTitle').textContent = translations[currentLang].title;
    document.getElementById('languageToggle').textContent = currentLang==='ru'?'PT':'RU';
}

/* ====== Mascote ====== */
const dimitri = document.getElementById('dimitri');
const congratsMessage = document.getElementById('congratsMessage');
function dimitriAcena(){ dimitri.classList.add('acenando'); setTimeout(()=>dimitri.classList.remove('acenando'),1200);}
function dimitriNeonCelebration(){ dimitri.classList.add('neon'); congratsMessage.style.display='block';
  setTimeout(()=>{ dimitri.classList.remove('neon'); congratsMessage.style.display='none'; },4000);
}

/* ====== Chat ====== */
const chatMessages = document.getElementById("chat-messages");
const chatInput = document.getElementById("chat-input");
const chatSend = document.getElementById("chat-send");
function addMessage(text,sender="user"){
  const div=document.createElement("div");
  div.className="chat-message "+sender;
  if(sender==="bot"){
    const avatar=document.createElement("div");
    avatar.className="avatar";
    avatar.textContent="AI";
    div.appendChild(avatar);
  }
  const span=document.createElement("span");
  span.textContent=text;
  div.appendChild(span);
  chatMessages.appendChild(div);
  chatMessages.scrollTop=chatMessages.scrollHeight;
}
chatSend.addEventListener("click", async ()=>{
  const text=chatInput.value.trim(); if(!text) return;
  addMessage(text,"user"); chatInput.value="";
  // Simulação de resposta AI
  setTimeout(()=>addMessage("Olá! Posso te ajudar com russo.", "bot"),500);
});

/* ====== Progressão de lições ====== */
function saveChatState(){ /* função placeholder caso queira salvar progresso */ }
</script>
</body>
</html>
