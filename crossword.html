<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–°–ª–∞–≤—è–Ω—Å–∫–∏–π –∫–ª—É–± - Exerc√≠cio Cruzado</title>
<link rel="stylesheet" href="style.css">
<link rel="icon" type="image/png" href="images/dimitri-favicon.png">

<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
#backBtn {
  padding: 5px 12px;
  font-size: 0.95em;
  cursor: pointer;
  background-color: #f0f0f0;
  border: 2px solid #333;
  border-radius: 6px;
  transition: all 0.3s;
}
#backBtn:hover {
  background-color: #ddd;
  transform: scale(1.05);
}
.correct { background-color: #c8e6c9; }
.wrong { background-color: #ffcdd2; }
.container { display:flex; justify-content:space-around; margin-top:15px; }
.column { display:flex; flex-direction:column; gap:8px; }
.word, .placeholder { padding:5px; border:1px solid #999; border-radius:4px; cursor:pointer; min-width:120px; text-align:center; }
</style>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCVt4eQOSUMhtKTUc89lAIM-AwrPakEOOI",
    authDomain: "clube-eslavo-dimitri.firebaseapp.com",
    projectId: "clube-eslavo-dimitri",
    storageBucket: "clube-eslavo-dimitri.firebasestorage.app",
    messagingSenderId: "696802076277",
    appId: "1:696802076277:web:3be4a9fb64001e25cefa3c",
    measurementId: "G-1H63WPQT0V"
  };
  firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();

  auth.onAuthStateChanged((user) => {
    if (!user) {
      localStorage.setItem("redirectAfterLogin", "progress.html");
      window.location.href = "login.html";
    } else {
      const logoutLink = document.getElementById("logoutLink");
      if(logoutLink) logoutLink.style.display = "inline-block";
    }
  });
</script>
</head>

<body>
<header>
  –°–ª–∞–≤—è–Ω—Å–∫–∏–π –∫–ª—É–±
  <a href="#" id="logoutBtn" class="btn" style="opacity:0; transition:opacity 0.5s;">Sair</a>
</header>

<div class="main-content">
  <div id="progressContainer">
    <div id="progressText"></div>
    <div id="progressBarContainer">
      <div id="progressBar" style="height:15px; background:#4CAF50; width:0%; border-radius:6px;"></div>
    </div>
  </div>

  <div id="cruzadoContainer" class="content"></div>

  <div id="backButtonContainer" style="text-align:center; margin-top:15px;">
    <button id="backBtn" onclick="window.location.href='index.html'">üîô Voltar</button>
  </div>
</div>





<script>
// Exerc√≠cios com tradu√ß√µes corretas
const exercises = [
  {russian:['–ü—Ä–∏–≤–µ—Ç','–°–ø–∞—Å–∏–±–æ','–ü–æ–∂–∞–ª—É–π—Å—Ç–∞'], portuguese:['Ol√°','Obrigado','Por favor']},
  {russian:['–ö–∞–∫ –¥–µ–ª–∞?','–•–æ—Ä–æ—à–æ','–ü–ª–æ—Ö–æ'], portuguese:['Como voc√™ est√°?','Bem','Mal']},
  {russian:['–î–æ —Å–≤–∏–¥–∞–Ω–∏—è','–ü–æ–∫–∞','–£–≤–∏–¥–∏–º—Å—è'], portuguese:['Adeus','Tchau','At√© logo']},
  {russian:['–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ','–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä','–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏'], portuguese:['Bom dia','Boa tarde','Boa noite']},
  {russian:['–Ø —Ö–æ—á—É –≤–æ–¥—ã','–Ø –≥–æ–ª–æ–¥–µ–Ω','–Ø —É—Å—Ç–∞–ª'], portuguese:['Eu quero √°gua','Estou com fome','Estou cansado']},
  {russian:['–ì–¥–µ —Ç—É–∞–ª–µ—Ç?','–ì–¥–µ –≤—Ö–æ–¥?','–ì–¥–µ –≤—ã—Ö–æ–¥?'], portuguese:['Onde √© o banheiro?','Onde √© a entrada?','Onde √© a sa√≠da?']},
  {russian:['–Ø –Ω–µ –ø–æ–Ω–∏–º–∞—é','–Ø –ø–æ–Ω–∏–º–∞—é','–Ø –∑–Ω–∞—é'], portuguese:['Eu n√£o entendo','Eu entendo','Eu sei']},
  {russian:['–ü–æ–º–æ–≥–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞','–í—ã–∑–æ–≤–∏—Ç–µ –ø–æ–ª–∏—Ü–∏—é','–ü–æ–∑–æ–≤–∏—Ç–µ –≤—Ä–∞—á–∞'], portuguese:['Ajude-me, por favor','Chame a pol√≠cia','Chame um m√©dico']},
  {russian:['–ú–µ–Ω—è –∑–æ–≤—É—Ç –ê–Ω–Ω–∞','–ú–µ–Ω—è –∑–æ–≤—É—Ç –ò–≤–∞–Ω','–ú–µ–Ω—è –∑–æ–≤—É—Ç –°–µ—Ä–≥–µ–π'], portuguese:['Meu nome √© Anna','Meu nome √© Ivan','Meu nome √© Sergey']},
  {russian:['–°–∫–æ–ª—å–∫–æ —ç—Ç–æ —Å—Ç–æ–∏—Ç?','–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏?','–°–∫–æ–ª—å–∫–æ –ª–µ—Ç?'], portuguese:['Quanto custa isso?','Que horas s√£o?','Quantos anos?']},
  {russian:['–î–∞','–ù–µ—Ç','–í–æ–∑–º–æ–∂–Ω–æ'], portuguese:['Sim','N√£o','Talvez']},
  {russian:['–ü–æ–∂–∞–ª—É–π—Å—Ç–∞','–°–ø–∞—Å–∏–±–æ','–ò–∑–≤–∏–Ω–∏—Ç–µ'], portuguese:['Por favor','Obrigado','Desculpe']},
  {russian:['–î–æ–±—Ä—ã–π –¥–µ–Ω—å','–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ','–î–æ–±—Ä–æ–π –Ω–æ—á–∏'], portuguese:['Boa tarde','Bom dia','Boa noite']},
  {russian:['–Ø –ª—é–±–ª—é —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫','–Ø –Ω–µ–Ω–∞–≤–∏–∂—É —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫','–Ø –∏–∑—É—á–∞—é —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫'], portuguese:['Eu amo russo','Eu odeio russo','Eu estudo russo']},
  {russian:['–î–æ –∑–∞–≤—Ç—Ä–∞','–î–æ —Å–∫–æ—Ä–æ–≥–æ','–î–æ –≤—Å—Ç—Ä–µ—á–∏'], portuguese:['At√© amanh√£','At√© breve','At√© logo']},
  {russian:['–ö—Ä–∞—Å–Ω—ã–π','–°–∏–Ω–∏–π','–ó–µ–ª—ë–Ω—ã–π'], portuguese:['Vermelho','Azul','Verde']},
  {russian:['–ñ—ë–ª—Ç—ã–π','–ß—ë—Ä–Ω—ã–π','–ë–µ–ª—ã–π'], portuguese:['Amarelo','Preto','Branco']},
  {russian:['–û–¥–∏–Ω','–î–≤–∞','–¢—Ä–∏'], portuguese:['Um','Dois','Tr√™s']},
  {russian:['–ß–µ—Ç—ã—Ä–µ','–ü—è—Ç—å','–®–µ—Å—Ç—å'], portuguese:['Quatro','Cinco','Seis']},
  {russian:['–•–ª–µ–±','–ú–æ–ª–æ–∫–æ','–°—ã—Ä'], portuguese:['P√£o','Leite','Queijo']},
  {russian:['–Ø–±–ª–æ–∫–æ','–ë–∞–Ω–∞–Ω','–ê–ø–µ–ª—å—Å–∏–Ω'], portuguese:['Ma√ß√£','Banana','Laranja']},
  {russian:['–ò–¥—Ç–∏','–ë–µ–∂–∞—Ç—å','–°–º–æ—Ç—Ä–µ—Ç—å'], portuguese:['Ir','Correr','Olhar']},
  {russian:['–ï—Å—Ç—å','–ü–∏—Ç—å','–°–ø–∞—Ç—å'], portuguese:['Comer','Beber','Dormir']},
  {russian:['–ú–∞—Ç—å','–û—Ç–µ—Ü','–ë—Ä–∞—Ç'], portuguese:['M√£e','Pai','Irm√£o']},
  {russian:['–°–µ—Å—Ç—Ä–∞','–î–µ–¥—É—à–∫–∞','–ë–∞–±—É—à–∫–∞'], portuguese:['Irm√£','Av√¥','Av√≥']},
  {russian:['–ö–Ω–∏–≥–∞','–†—É—á–∫–∞','–°—Ç–æ–ª'], portuguese:['Livro','Caneta','Mesa']},
  {russian:['–°—Ç—É–ª','–û–∫–Ω–æ','–î–≤–µ—Ä—å'], portuguese:['Cadeira','Janela','Porta']}
];

// Fun√ß√£o para embaralhar array
function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
  return array;
}

// Embaralhar ordem dos exerc√≠cios
shuffle(exercises);

let currentExercise = 0;
let totalCorrect = 0;

function updateProgress(){
  const progressText = document.getElementById('progressText');
  const progressBar = document.getElementById('progressBar');
  progressText.textContent = `Exerc√≠cio ${currentExercise+1} de ${exercises.length}`;
  progressBar.style.width = Math.round(currentExercise/exercises.length*100) + '%';
}

function loadExercise(){
  const container = document.getElementById('cruzadoContainer');
  if(currentExercise >= exercises.length){
    container.innerHTML = `<h2>Voc√™ completou todos os exerc√≠cios!</h2>
                           <p>Voc√™ acertou ${Math.round(totalCorrect/exercises.length*100)}% das palavras!</p>`;
    document.getElementById('progressText').textContent = '';
    document.getElementById('progressBar').style.width = '100%';
    return;
  }

  updateProgress();
  const ex = exercises[currentExercise];

  // Embaralhar palavras russas e portuguesas separadamente
  const russianShuffled = shuffle([...ex.russian]);
  const portugueseShuffled = shuffle([...ex.portuguese]);

  let russianHTML = '', portugueseHTML = '';
  russianShuffled.forEach((word, i) => {
    const correctIndex = ex.russian.indexOf(word);
    russianHTML += `<div class="word" draggable="true" id="r${currentExercise}_${correctIndex}">${word}</div>`;
  });
  portugueseShuffled.forEach((word, i) => {
    const correctIndex = ex.portuguese.indexOf(word);
    portugueseHTML += `<div class="placeholder" data-correct="r${currentExercise}_${correctIndex}">${word}</div>`;
  });

  container.innerHTML = `
    <h2>Exerc√≠cio ${currentExercise+1} ‚Äì Arraste cada palavra para a tradu√ß√£o correta ‚úÖ</h2>
    <div class="container">
      <div class="column" id="russian">${russianHTML}</div>
      <div class="column" id="portuguese">${portugueseHTML}</div>
    </div>
    <button id="checkBtn" class="btn">Verificar</button>
    <p class="feedback"></p>
  `;

  let draggedWord = null;
  document.querySelectorAll('.word').forEach(word => word.addEventListener('dragstart', e => draggedWord = e.target));
  document.querySelectorAll('.placeholder').forEach(ph => {
    ph.addEventListener('dragover', e => e.preventDefault());
    ph.addEventListener('drop', e => {
      if(ph.children.length === 0) ph.appendChild(draggedWord);
    });
  });

  document.getElementById('checkBtn').addEventListener('click', checkAll);
}

function checkAll(){
  const placeholders = document.querySelectorAll('.placeholder');
  let score = 0;
  placeholders.forEach(ph => {
    if(ph.children.length > 0 && ph.children[0].id === ph.getAttribute('data-correct')){
      ph.classList.add('correct'); ph.classList.remove('wrong'); score++;
    } else {
      ph.classList.add('wrong'); ph.classList.remove('correct');
    }
  });
  document.querySelector('.feedback').textContent = `Voc√™ acertou ${score} de ${placeholders.length} palavras`;
  if(score === placeholders.length) totalCorrect++;
  currentExercise++;
  setTimeout(loadExercise,1500);
}

// Inicia o primeiro exerc√≠cio
loadExercise();
</script>


<script>
auth.onAuthStateChanged((user) => {
  const logoutBtn = document.getElementById("logoutBtn");
  if (!user) {
    localStorage.setItem("redirectAfterLogin", "crossword.html");
    window.location.href = "login.html";
  } else if(logoutBtn){
    logoutBtn.style.opacity = 1;
    logoutBtn.addEventListener("click", (e)=>{
      e.preventDefault();
      auth.signOut().then(()=>{
        localStorage.removeItem("redirectAfterLogin");
        window.location.href="index.html";
      });
    });
  }
});
</script>
</body>
</html>
